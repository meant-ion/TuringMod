import { createCacheKey } from "../utils/createCacheKey.mjs";
export function Cached(timeInSeconds = Infinity, cacheFailures = false) {
    return function (target, propName, descriptor) {
        const origFn = descriptor.value;
        descriptor.value = async function (...params) {
            const cacheKey = createCacheKey(propName, params);
            const cachedValue = this.getFromCache(cacheKey);
            if (cachedValue) {
                return cachedValue;
            }
            const result = await origFn.apply(this, params);
            if (result != null || cacheFailures) {
                this.setCache(cacheKey, result, timeInSeconds);
            }
            return result;
        };
        return descriptor;
    };
}
//# sourceMappingURL=Cached.mjs.map
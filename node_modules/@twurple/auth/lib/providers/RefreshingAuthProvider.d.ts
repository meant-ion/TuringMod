import type { MakeOptional } from '@d-fischer/shared-utils';
import type { AccessToken } from '../AccessToken';
import type { AuthProvider, AuthProviderTokenType } from './AuthProvider';
/**
 * Configuration for the {@RefreshingAuthProvider}.
 */
export interface RefreshConfig {
    /**
     * The client ID of your application.
     */
    clientId: string;
    /**
     * The client secret of your application.
     */
    clientSecret: string;
    /**
     * A callback that is called whenever the auth provider refreshes the token, e.g. to save the new data in your database.
     *
     * @param token The token data.
     */
    onRefresh?: (token: AccessToken) => void;
}
/**
 * An auth provider with the ability to make use of refresh tokens,
 * automatically refreshing the access token whenever necessary.
 */
export declare class RefreshingAuthProvider implements AuthProvider {
    private readonly _clientId;
    private readonly _clientSecret;
    private _accessToken;
    private readonly _onRefresh?;
    /**
     * The type of tokens the provider generates.
     *
     * This auth provider generates user tokens.
     */
    readonly tokenType: AuthProviderTokenType;
    /**
     * Creates a new auth provider based on the given one that can automatically
     * refresh access tokens.
     *
     * @param refreshConfig The information necessary to automatically refresh an access token.
     * @param initialToken The initial access token.
     */
    constructor(refreshConfig: RefreshConfig, initialToken: MakeOptional<AccessToken, 'accessToken' | 'scope'>);
    /**
     * Retrieves an access token.
     *
     * If the current access token does not have the requested scopes, the base auth
     * provider is called.
     *
     * If the current access token is expired, automatically renew it.
     *
     * @param scopes The requested scopes.
     */
    getAccessToken(scopes?: string[]): Promise<AccessToken | null>;
    /**
     * Force a refresh of the access token.
     */
    refresh(): Promise<AccessToken>;
    /**
     * The client ID.
     */
    get clientId(): string;
    /**
     * The scopes that are currently available using the access token.
     */
    get currentScopes(): string[];
}
//# sourceMappingURL=RefreshingAuthProvider.d.ts.map